{% extends '../base.html' %}
{% load mptt_tags %}

<!--    Page content      -->

{% block content %}
<div class="row">  
    <ul class="list-group col-xl-2  col-md-3  bg-secondary pr-0">
        {% full_tree_for_model CaptainConsole.Category as gs %}
        {% for node, structure in gs|tree_info %}
            <li>
                <a href="/category/{{ node.get_slug_link }}" class="{% if node.is_leaf_node %}child_node{%endif%} list-group-item bg-secondary border-warning rounded-0 list-group-item-action">
                    {{ node }}
                </a>
            </li>
        {% endfor %}

        
        </ul>
    <main class="container col-xl-10 col-md-9 pt-3">

        <!-- ADD SIDEBAR HERE FOR CATEGORIES -->
        <form method="GET" action="{{ request.get_full_path }}">
            <h4>Sort by</h4>
            <fieldset>
                <label>
                    <input type="radio" name="sort_by" value="name" required>
                    <span>by name</span> 
                </label>
            </fieldset>
            <fieldset> 
                <label>
                    <input type="radio" name="sort_by" value="price" required>
                    <span>by price</span>
                </label>
            </fieldset>
            <button type="submit">Sort products</button>
        </form>
        <section class="container d-flex flex-wrap justify-content-center">
            {% for product in products %}
                {% include "../components/product_card.html"%}
            {% endfor %}
        </section>

        <div class="pagination">
            <span class="step-links">
                {% if products.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ products.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ products.number }} of {{ products.paginator.num_pages }}.
                </span>

                {% if products.has_next %}
                    <a href="?page={{ products.next_page_number }}">next</a>
                    <a href="?page={{ products.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
        </div>
    </main>
{% endblock %}
